<html >
<head>
	<script type="text/javascript" src="../../libs/jQuery/jquery-2.1.1.js"></script>
	<script type="text/javascript" src="../../libs/Textillate/jquery.lettering.js"></script>
	<script type="text/javascript" src="../../libs/Textillate/jquery.textillate.js"></script>
	<script type="text/javascript" src="../js/database/welcomePageData.js"></script>
	<script type="text/javascript" src="../js/navbar/navbar.js"></script>
  <script type="text/javascript" src = "../../libs/Bootstrap/js/bootstrap.min.js"></script>
  <script type="text/javascript" src = "../js/googleAnalytics/googleTracking.js"></script>

  <link href="../../libs/Bootstrap/css/bootstrap.min.css" rel="stylesheet">

	<link rel="stylesheet" type="text/css" href="../../libs/Animatecss/animate.css" />
	<link rel="stylesheet" type="text/css" href="../css/navigationBar.css">
	<link rel="stylesheet" type="text/css" href="../css/welcomePage.css">


  <script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-54475895-1', 'auto');
	  ga('send', 'pageview');

  </script>

	<title>Cors View</title>
</head>
<body>
<header>
  <nav class="top-nav">
 	 <a class="logo" href="index.html"><img src="../../res/img/icon.png"></img></a>
  <div class="links">
    <a href="#">ABOUT</a>
  </div><div class="links">
    <a href="#">CONTACT</a>
  </div>

  <div></div>
</nav>
<div id="profile-container">

 </div>

<fb:login-button id="login-button" scope="public_profile,email" id="fb-login-button" size="xlarge" onlogin="redirect();" style="z-index:100;position:fixed;top:43%;left:50%;"></fb:login-button>
</header>
<h1 class="tlt title" data-in-effect="flipInY">Cors View - NUS</h1>
<h5 class="tlt subtitle" data-in-effect="flipInY">Please log in with your Facebook account.</h5>
<div class="fb-login">
	
</div>
<div class="content">
	<div class="quotes"></div>
	<div class="author"></div>
</div>
<div id="fb-root"></div>


<script type="text/javascript">
	$(function(){
		$(".title").textillate({
			initialDelay:500,
			// in:{
			// 	delayScale:2.0
			// }
			// callback:function(){
			// 	$(".title").textillate({
			// 		in:{
			// 			effect:"swing"
			// 		}
			// 	});
			// }
		});
		$(".subtitle").textillate({
			initialDelay:500,
			in: {
				callback:loadFBButton
			}
		});
		addProfileListener();
		// $("#profile").focusout(function(){
		// 	$(this).popover("hide");
		// });
	});

	function loadFBButton(){
		var enterButtonsHtml = "<a><img class=\"fb-login-btn\" src=\"../../res/img/welcome-page-fblogin-dim.png\" style=\"display:none\" width=\"200\" /></a><br><br>";
		enterButtonsHtml += "<a href=\"index.html\">Just show me the module reviews</a>";
		$(".fb-login").hide()
		.html(enterButtonsHtml)
		.fadeIn("slow",function(){
			loadQuote();
		});
		// $(".fb-login-btn").click(checkLoginState);

	}

	function redirect(){
		checkLoginState();
		window.location.href = "index.html";
	}

	function loadQuote(){
		loadQuoteData();
		$(".quote-data").textillate({
			initialDelay:1000,
			autoStart:true,
			in:{
				delayScale:1.0,
				shuffle:true
			},
			out:{
				effect:"flipOutY",
				delayScale:0.5
			},
			loop:true
		});

		$(".author-data").textillate({
			autoStart:true,
			initialDelay:1000,
			in:{
				delayScale:1.0,
				shuffle:true
			},
			out:{
				effect:"hinge",
				delayScale:0.5,
				shuffle:true
			},
			loop:true
		});

		initWelcomeEventListeners();
	}

	function initWelcomeEventListeners(){
		$(".fb-login-btn").hover(
			function(){
				$(".fb-login-btn").attr("src","../../res/img/welcome-page-fblogin.png");
			},
			function(){
				$(".fb-login-btn").attr("src","../../res/img/welcome-page-fblogin-dim.png");
			}
		);

	}

	function loadQuoteData(){
		var len = welcomePageData.length;
		var data = welcomePageData[Math.floor(Math.random()*len)];

		var quote = "<p class=\"quote-data\" data-in-effect=\"fadeInLeft\" data-out-effect=\"hinge\">"+data.quotes+"</p>";
		$(".quotes").html(quote);

		var author = "<p class=\"author-data\" data-in-effect=\"fadeInLeft\" data-out-effect=\"hinge\"> --- "+data.author+"</p>";
		$(".author").html(author);
	}
</script>	
<script type="text/javascript" src="../js/facebook/fbLogin.js"></script>
	<script type="text/javascript" src="../js/facebook/fbMethods.js"></script>
</body>

</html>